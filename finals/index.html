<!-- saved from url=(0059)https://itp.nyu.edu/~sve204/liveweb_fall2019/direction.html -->
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<script src="/socket.io/socket.io.js"></script>
</head>
<style>
	body {
		font-size: 36px;
	}
</style>

<body>
	<div id="orient"></div>
	<div id="motion"></div>
	<div id="compass"></div>
	<div id="touch"></div>

</body>
<script type="text/javascript">
	let socket = io.connect();
	socket.on('connect', function () {
		console.log("Connected");
	});

	//1. orientation
	function onOrientationChange(e) {
		console.log(e);

		let alpha = Math.floor(e.alpha),
			beta = Math.floor(e.beta),
			gamma = Math.floor(e.gamma);

		let orient = document.getElementById('orient');
		orient.innerHTML = `alpha: ${alpha}degrees<br/> beta:  ${beta}degrees<br/> gamma:  ${gamma}degrees`;
	}
	//2. motion sensor
	//can have with gravity, if grater than x, do something
	//flip to silent
	//driving games
	//reset a form
	//undo an action
	function ondevicemotion(e) {
		let x = Math.floor(e.acceleration.x),
			y = Math.floor(e.acceleration.y),
			z = Math.floor(e.acceleration.z);

		let motion = document.getElementById('motion');
		motion.innerHTML =
			`acceleration x: ${x} <br/>acceleration y: ${y} <br/>acceleration z: ${z}`;

	}

	//3. direction, for safari mobile browser only
	function handleCompassEvent(e) {
		let compassHeading = e.webkitCompassHeading;
		let compass = document.getElementById('compass');
		compass.innerHTML = `compass due N: ${compassHeading} degree`;
	}


	//4. touch --> not working
	//touch, moves, removes
	//current position of touchscreen
	function handleTouchEvent(e) {
		let allTouches = e.touches,
			allTouchesLength = allTouches.length;
		let touch = document.getElementById('touch');

		if (e.type === 'touchstart') {
			e.preventDefault();
		}
		touch.innerHTML = `${allTouchesLength} touched the screen`;
	}
	// if (window.DeviecOrientationEvent) {
	// console.log('DeviecOrientation supported');
	window.addEventListener('deviceorientation', onOrientationChange, false);
	window.addEventListener('devicemotion', ondevicemotion, false);
	window.addEventListener('devicemotion', handleCompassEvent, false);
	window.addEventListener('touchstart', handleTouchEvent, false);
	// window.addEventListener('touchend', handleTouchEvent, false);
	// } else {
	// 	console.log('DeviecOrientation NOTTTT supported');
	// }
</script>

</html>
